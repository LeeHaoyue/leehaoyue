(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["virus"],{"0a49":function(t,e,a){var n=a("9b43"),s=a("626a"),i=a("4bf8"),r=a("9def"),o=a("cd1c");t.exports=function(t,e){var a=1==t,l=2==t,c=3==t,u=4==t,p=6==t,f=5==t||p,h=e||o;return function(e,o,m){for(var d,v,w=i(e),b=s(w),y=n(o,m,3),g=r(b.length),_=0,C=a?h(e,g):l?h(e,0):void 0;g>_;_++)if((f||_ in b)&&(d=b[_],v=y(d,_,w),t))if(a)C[_]=v;else if(v)switch(t){case 3:return!0;case 5:return d;case 6:return _;case 2:C.push(d)}else if(u)return!1;return p?-1:c||u?u:C}}},1169:function(t,e,a){var n=a("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"386b":function(t,e,a){var n=a("5ca1"),s=a("79e5"),i=a("be13"),r=/"/g,o=function(t,e,a,n){var s=String(i(t)),o="<"+e;return""!==a&&(o+=" "+a+'="'+String(n).replace(r,"&quot;")+'"'),o+">"+s+"</"+e+">"};t.exports=function(t,e){var a={};a[t]=e(o),n(n.P+n.F*s(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",a)}},"546f":function(t,e,a){},5836:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{ref:"virus",staticClass:"virus"},[a("el-button",{staticClass:"refresh",attrs:{icon:"el-icon-refresh-left",type:"primary",circle:""},on:{click:t.refresh}}),a("el-button",{staticClass:"newsList",attrs:{icon:"el-icon-message",type:"primary",circle:""},on:{click:t.openNewsList}}),a("el-col",{staticClass:"update-info",attrs:{span:22,offset:1}},[a("el-tag",[t._v("上次刷新时间："+t._s(t.updateTime))]),a("el-tag",{attrs:{type:"warning"}},[t._v("数据来源：网易新闻")])],1),a("el-col",{staticClass:"map-info",attrs:{span:22,offset:1}},[a("el-divider",{attrs:{"content-position":"left"}},[a("h3",[a("i",{staticClass:"el-icon-map-location"}),t._v("各地疫情实时分布热力图")])]),a("virusMap",{attrs:{chartName:t.name,chartStyle:t.chartStyle,countData:t.countData,countPart:t.countPart}})],1),a("el-col",{staticClass:"conut-info",attrs:{span:22,offset:1}},[a("el-divider",{attrs:{"content-position":"left"}},[a("h3",[a("i",{staticClass:"el-icon-s-order"}),t._v("各地疫情实时统计")])]),a("div",{staticClass:"conut-legend"},[a("el-button",{attrs:{type:"danger",size:"mini"}},[t._v("确诊 - "+t._s(t.countTotal.confirm))]),a("el-button",{attrs:{type:"info",size:"mini"}},[t._v("死亡 - "+t._s(t.countTotal.dead))]),a("el-button",{attrs:{type:"success",size:"mini"}},[t._v("治愈 - "+t._s(t.countTotal.heal))])],1),a("el-tree",{attrs:{data:t.countData,props:t.countProps},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,s=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"btn-lb"},[t._v(t._s(n.label))]),a("span",{staticClass:"btn-gp"},[a("el-button",{attrs:{type:"danger",plain:""}},[t._v(t._s(s.confirm||0))]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-button",{attrs:{type:"info",plain:""}},[t._v(t._s(s.dead||0))]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-button",{attrs:{type:"success",plain:""}},[t._v(t._s(s.heal||0))])],1)])}}])})],1),a("el-col",{staticClass:"author-info",attrs:{span:22,offset:1}},[a("el-tag",{attrs:{type:"success"}},[t._v("Powered by LeeHaoYue")]),a("el-tag",{attrs:{type:"info"}},[t._v("持续更新中。。。")])],1),a("el-drawer",{staticClass:"news-list",attrs:{title:"实时新闻【"+t.$globalmethod.timeFilter((new Date).getTime(),"yyyy-mm-dd/hh:mm")+"】",size:"90%",visible:t.newsdrawer,direction:"rtl"},on:{"update:visible":function(e){t.newsdrawer=e}}},[a("el-row",{ref:"news",staticClass:"news-list-inner"},[a("el-col",{attrs:{span:24}},[a("el-timeline",t._l(t.newsList.list,function(e,n){return a("el-timeline-item",{key:n,attrs:{timestamp:e.time,placement:"top"}},[a("el-card",[a("h4",[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.detail))]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.newsDetial(e)}}},[t._v("详情")])],1)],1)}),1)],1),a("el-backtop",{attrs:{target:".news-list-inner"}})],1)],1),a("el-dialog",{staticClass:"newsView",attrs:{top:"0",width:"100%",title:t.newsTitle,modal:!1,visible:t.newsDetialShow},on:{"update:visible":function(e){t.newsDetialShow=e}}},[a("iframe",{attrs:{src:t.newsLink,id:"newsDetial"}})]),a("el-backtop",{attrs:{target:".virus"}})],1)},s=[],i=(a("ac6a"),a("b54a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"virus-map"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isCountry,expression:"isCountry"}],attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.reback(t.countData)}}},[t._v("全国")]),a("el-col",{attrs:{span:24}},[a("h4",[t._v(t._s(t.country.name))])]),a("el-col",{attrs:{span:24}},[a("basicEcharts",{attrs:{chartName:t.chartName,chartStyle:t.chartStyle,options:t.mapData},on:{chartclick:t.chartclick}})],1),a("el-col",{attrs:{span:24}},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:t.isCountry,expression:"isCountry"}],staticStyle:{width:"100%"},attrs:{border:"",height:"250",data:t.country.data}},t._l(t.tablelabel,function(e,n){return a("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label},scopedSlots:t._u([{key:"default",fn:function(n){return[a("span",{class:e.prop},[t._v(t._s(n.row[e.prop]||0))])]}}],null,!0)})}),1)],1)],1)}),r=[],o=(a("7514"),a("7f7f"),{option:{background:"none",tooltip:{triggerOn:"click",formatter:function(t){return.5===t.value?"".concat(t.name,"：有疑似病例"):"".concat(t.seriesName,"<br />").concat(t.name,"：").concat(t.value)}},visualMap:{min:0,max:1e3,left:0,bottom:20,showLabel:!0,pieces:[{gte:1e3,label:"> 1000 人",color:"#76171C"},{gt:500,lte:1e3,label:"500 - 1000 人",color:"#C93130"},{gte:100,lte:499,label:"100 - 499 人",color:"#E16554"},{gte:10,lte:99,label:"10 - 99 人",color:"#F1A88B"},{gte:1,lte:9,label:"1 - 9 人",color:"#FCEED3"},{value:0,label:"0 人",color:"#F2F6FC"}],show:!0},geo:{show:!0,roam:!1,scaleLimit:{min:1,max:2},zoom:1.15,top:20,label:{normal:{show:!0,fontSize:"14",color:"rgba(0,0,0,0.7)"}},itemStyle:{normal:{shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.2)",borderColor:"rgba(0, 0, 0, 0.2)"},emphasis:{areaColor:"#f2d5ad",shadowOffsetX:0,shadowOffsetY:0,borderWidth:0}}},series:[{name:"确诊病例",type:"map",geoIndex:0,data:{}}]}}),l={name:"virus-map",props:{chartName:"",chartStyle:"",countData:"",countPart:""},data:function(){return{mapDetial:{name:"",mapType:"",data:""},isCountry:!1,country:{name:"全国",data:""},tablelabel:[{prop:"name",label:"地区"},{prop:this.countPart[0],label:"确诊"},{prop:this.countPart[2],label:"死亡"},{prop:this.countPart[3],label:"治愈"}]}},watch:{countData:{handler:function(t){this.reback(t)},deep:!0,immediate:!0}},computed:{mapData:function(){var t=this.$lodash.cloneDeep(o);return t.option.geo.map=this.mapDetial.name,t.option.series[0].mapType=this.mapDetial.mapType,t.option.series[0].data=this.mapDetial.data,t.option},datadetail:function(){return this.options}},mounted:function(){},methods:{reback:function(t){var e=this;if(this.country={name:"全国",data:[]},this.isCountry=!1,!this.$globalmethod.isEmpty(t)){var a=[];t.forEach(function(t){a.push({name:t.name,value:t[e.countPart[0]]})}),this.$set(this,"mapDetial",{name:"china",mapType:"china",data:a})}},chartclick:function(t){var e=this,a=this.countData.find(function(e){return e.name===t.name}),n=["市","区","地区","盟","自治州"],s=["北京","天津","上海","重庆"],i=[];this.isCountry=!0,this.$globalmethod.isEmpty(a)||(this.country={name:t.name,data:a.children},a.children.forEach(function(a){i.push({name:n.find(function(t){return a.name.indexOf(t)>=0})?a.name:s.find(function(e){return t.name.indexOf(e)>=0})?a.name+"区":a.name+"市",value:a[e.countPart[0]]})}),this.$set(this,"mapDetial",{name:t.name,mapType:t.name,data:i}))}}},c=l,u=(a("fbfa"),a("2877")),p=Object(u["a"])(c,i,r,!1,null,null,null),f=p.exports,h={name:"virus",data:function(){return{name:"virusEcharts",chartStyle:{width:"100%",height:"50vh"},updateTime:"",countData:[],countTotal:{},countProps:{children:"children",label:"name"},countPart:["confirm","suspect","dead","heal"],newsList:[],newsdrawer:!1,newsDetialShow:!1,newsTitle:"",newsLink:""}},mounted:function(){this.refresh()},methods:{refresh:function(){this.getCountData(),this.getNewsData(),this.$refs.virus&&(this.$refs.virus.$el.scrollTop=0),this.$refs.news&&(this.$refs.news.$el.scrollTop=0)},openNewsList:function(){this.newsdrawer=!0},getNewsData:function(){var t=this;this.$axios.jsonp({url:"https://news.163.com/special/00018IRU/virus_report_data.js",name:"callback",callback:"callback"}).then(function(e){t.$set(t,"newsList",e)})},newsDetial:function(t){this.newsTitle=t.title,this.newsLink=t.link,this.newsDetialShow=!0},getCountData:function(){var t=this;this.$message({showClose:!0,customClass:"refreshMSG",message:"正在更新数据"}),this.$axios.getData({baseURL:"/wyVirusCount",url:"/ug/api/wuhan/app/index/feiyan-data-list?t="+(new Date).getTime(),method:"get"}).then(function(e){var a=t.setTreeData({source:e.data.data.list,id:"name",parentId:"province",children:"children",count:t.countPart});t.updateTime=t.$globalmethod.timeFilter(e.data.timestamp,"yyyy-mm-dd/hh:mm"),t.$set(t,"countData",a.list),t.$set(t,"countTotal",a.total),t.$message.closeAll(),t.$message({showClose:!0,customClass:"refreshMSG",message:"更新成功",type:"success"})})},setTreeData:function(t){var e=this,a=t.source,n=t.id,s=t.parentId,i=t.children,r=t.count,o=this.$lodash.cloneDeep(a),l=[],c={},u={};return o.filter(function(t){var a=o.filter(function(e){return t[s]===e[s]}),u={},p=0,f=e.$globalmethod.reDuplication(a,r[0]).reverse();c[t[s]]||(r.forEach(function(t){p=0,f.map(function(e){p+=e[t]}),u[t]=p}),u[n]=t[s],u[i]=f,l.push(u),c[t[s]]=!0)}),l=this.$globalmethod.reDuplication(l,r[0]).reverse(),r.forEach(function(t){u[t]=0,l.map(function(e){u[t]+=e[t]})}),{list:l,total:u}}},components:{virusMap:f}},m=h,d=(a("a697"),Object(u["a"])(m,n,s,!1,null,null,null));e["default"]=d.exports},7514:function(t,e,a){"use strict";var n=a("5ca1"),s=a("0a49")(5),i="find",r=!0;i in[]&&Array(1)[i](function(){r=!1}),n(n.P+n.F*r,"Array",{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(i)},"9f10":function(t,e,a){},a697:function(t,e,a){"use strict";var n=a("9f10"),s=a.n(n);s.a},b54a:function(t,e,a){"use strict";a("386b")("link",function(t){return function(e){return t(this,"a","href",e)}})},cd1c:function(t,e,a){var n=a("e853");t.exports=function(t,e){return new(n(t))(e)}},e853:function(t,e,a){var n=a("d3f4"),s=a("1169"),i=a("2b4c")("species");t.exports=function(t){var e;return s(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)||(e=void 0),n(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}},fbfa:function(t,e,a){"use strict";var n=a("546f"),s=a.n(n);s.a}}]);